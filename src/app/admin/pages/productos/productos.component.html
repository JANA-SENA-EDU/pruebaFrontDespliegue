<div class="producto-container">
  <h2>Productos disponibles</h2>

  <div class="filtro-categoria">
    <label for="categoria">Filtrar por categoría:</label>
    <select id="categoria" (change)="onCategoriaChange($event)">
      <option value="">Todas</option>
      <option *ngFor="let cat of categorias" [value]="cat.idCategoria">
        {{ cat.nombreCategoria }}
      </option>
    </select>

    <button mat-raised-button color="primary" [routerLink]="['/admin/productos/crear']">
      + Crear producto
    </button>
  </div>

  <div class="producto-grid">
    <mat-card *ngFor="let producto of productos" class="producto-card mat-elevation-z4">
      <img mat-card-image *ngIf="producto.imagenes?.length" [src]="producto.imagenes[0].urlImagen" alt="Imagen del producto" />

      <mat-card-content>
        <h3>
          {{ producto.nombre }}
          <span *ngIf="producto.idEstadoProducto === 2" class="estado-inactivo">
            (Inactivo)
          </span>
        </h3>
        <p><strong>Dimensiones:</strong> {{ producto.dimensiones }}</p>
        <p><strong>Descripción:</strong> {{ producto.descripcion }}</p>

        <div class="color-container" *ngIf="producto.colores?.length">
          <strong>Colores:</strong>
          <div class="color" *ngFor="let color of producto.colores"
              [style.backgroundColor]="color.codigoColor" title="{{ color.codigoColor }}">
          </div>
        </div>
      </mat-card-content>

      <div class="producto-acciones">
        <button mat-button color="primary" [routerLink]="['/admin/productos/editar', producto.idProducto]">Editar</button>
        <button mat-button color="warn" (click)="eliminarProducto(producto.idProducto)">Eliminar</button>
      </div>
    </mat-card>
  </div>
</div>

